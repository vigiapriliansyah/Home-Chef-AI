graph TB
    %% ========================================
    %% SIMPLIFIED SERVER ARCHITECTURE
    %% ========================================
    
    %% User Layer
    USERS["ğŸ‘¥ Users<br/>Web Browsers & Mobile"]
    
    %% External Services
    subgraph "ğŸŒ External Services"
        CDN["ğŸš€ CDN<br/>Static Files & Images"]
        DNS["ğŸ” DNS<br/>Domain Routing"]
    end
    
    %% Load Balancer
    LB["âš–ï¸ Load Balancer<br/>Nginx/HAProxy<br/>SSL & Rate Limiting"]
    
    %% Web Application
    subgraph "ğŸŒ Web Application Tier"
        WEB["ğŸ–¥ï¸ Next.js Web Server<br/>Node.js 18+<br/>Port: 3000<br/>SSR & API Routes"]
    end
    
    %% AI API Service
    subgraph "ğŸ¤– AI Service Tier"
        API["ğŸ§  FastAPI AI Server<br/>Python + PyTorch<br/>Port: 8000<br/>Text Generation"]
        MODEL["ğŸ“¦ AI Model<br/>Qwen2.5-1.5B<br/>Indonesian Recipes"]
    end
    
    %% Database Layer
    subgraph "ğŸ’¾ Database Tier"
        DB["ğŸ—„ï¸ Database<br/>PostgreSQL<br/>Users, Chats, Messages"]
        CACHE["ğŸ”´ Cache<br/>Redis<br/>Sessions & Responses"]
    end
    
    %% Storage
    subgraph "ğŸ“ Storage Tier"
        STATIC["ğŸ“ Static Storage<br/>AWS S3<br/>Images & Assets"]
        MODEL_STORAGE["ğŸ“¦ Model Storage<br/>EFS/NFS<br/>Model Files"]
    end
    
    %% Training (Optional/Separate)
    subgraph "ğŸ“ Training Environment"
        TRAIN["ğŸ‹ï¸ Training Server<br/>GPU Server<br/>Model Fine-tuning"]
        DATA["ğŸ“Š Training Data<br/>Recipe Dataset<br/>CSV Files"]
    end
    
    %% Basic Monitoring
    MONITOR["ğŸ“Š Monitoring<br/>Logs & Metrics<br/>Health Checks"]
    
    %% ========================================
    %% CONNECTIONS
    %% ========================================
    
    %% User Flow
    USERS --> CDN
    USERS --> DNS
    USERS --> LB
    
    %% Load Balancer Distribution
    LB --> WEB
    
    %% Web to Services
    WEB --> API
    WEB --> DB
    WEB --> CACHE
    WEB --> STATIC
    
    %% AI Service
    API --> MODEL
    API --> MODEL_STORAGE
    API --> CACHE
    
    %% Training Flow (Dashed - Separate Process)
    DATA -.-> TRAIN
    TRAIN -.->|"Deploy Model"| MODEL_STORAGE
    
    %% Monitoring Connections
    WEB -.-> MONITOR
    API -.-> MONITOR
    DB -.-> MONITOR
    
    %% CDN Integration
    CDN --> STATIC
    
    %% ========================================
    %% STYLING
    %% ========================================
    
    classDef userLayer fill:#e3f2fd,stroke:#2196f3,stroke-width:3px,color:#000
    classDef external fill:#e8f4fd,stroke:#1e88e5,stroke-width:2px,color:#000
    classDef loadBalancer fill:#fff3e0,stroke:#ff9800,stroke-width:3px,color:#000
    classDef webTier fill:#e8f5e8,stroke:#4caf50,stroke-width:2px,color:#000
    classDef aiTier fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000
    classDef dataTier fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000
    classDef storageTier fill:#fff8e1,stroke:#ffc107,stroke-width:2px,color:#000
    classDef training fill:#ffebee,stroke:#f44336,stroke-width:2px,color:#000
    classDef monitoring fill:#e0f2f1,stroke:#00897b,stroke-width:2px,color:#000
    
    %% Apply Styles
    class USERS userLayer
    class CDN,DNS external
    class LB loadBalancer
    class WEB webTier
    class API,MODEL aiTier
    class DB,CACHE dataTier
    class STATIC,MODEL_STORAGE storageTier
    class TRAIN,DATA training
    class MONITOR monitoring 