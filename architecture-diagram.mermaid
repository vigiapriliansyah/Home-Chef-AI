graph TB
    %% =================================
    %% PROJECT 1: HOME CHEF AI WEB APP
    %% =================================
    
    subgraph "ğŸŒ HOME CHEF AI WEB APPLICATION"
        direction TB
        
        %% Presentation Layer
        subgraph "ğŸ“± Presentation Layer"
            UI1["ğŸ¨ UI Components<br/>â€¢ Chat Interface<br/>â€¢ Auth Forms<br/>â€¢ Navigation<br/>â€¢ Shared Chat View"]
            PAGES1["ğŸ“„ Next.js Pages<br/>â€¢ Landing Page<br/>â€¢ Chat Pages<br/>â€¢ Auth Pages<br/>â€¢ Error Pages"]
        end
        
        %% Business Logic Layer
        subgraph "ğŸ§  Business Logic Layer"
            AUTH1["ğŸ” Authentication<br/>â€¢ NextAuth.js<br/>â€¢ Session Management<br/>â€¢ OAuth (Google)<br/>â€¢ User Registration"]
            HOOKS1["ğŸª React Hooks<br/>â€¢ Custom Hooks<br/>â€¢ State Management<br/>â€¢ Side Effects"]
            UTILS1["ğŸ› ï¸ Utilities<br/>â€¢ Streaming Utils<br/>â€¢ Theme Management<br/>â€¢ Form Validation"]
        end
        
        %% API Layer
        subgraph "ğŸ”Œ API Layer"
            API1["ğŸ“¡ API Routes<br/>â€¢ /api/chat<br/>â€¢ /api/auth<br/>â€¢ /api/messages<br/>â€¢ /api/users"]
            MIDDLEWARE1["âš™ï¸ Middleware<br/>â€¢ Auth Protection<br/>â€¢ CORS Handling<br/>â€¢ Request Validation"]
        end
        
        %% Data Layer
        subgraph "ğŸ’¾ Data Layer"
            DB1["ğŸ—„ï¸ SQLite Database<br/>â€¢ Users<br/>â€¢ Chats<br/>â€¢ Messages<br/>â€¢ Sessions"]
            ORM1["ğŸ”§ Prisma ORM<br/>â€¢ Schema Management<br/>â€¢ Query Builder<br/>â€¢ Migration System"]
        end
    end
    
    %% =================================
    %% PROJECT 2: AI TRAINING PIPELINE
    %% =================================
    
    subgraph "ğŸ¤– AI MODEL TRAINING PIPELINE"
        direction TB
        
        %% Data Processing Layer
        subgraph "ğŸ“Š Data Processing Layer"
            DATASET["ğŸ“ Dataset<br/>â€¢ Indonesian_Food_Recipes_full.csv<br/>â€¢ Recipe Collection<br/>â€¢ Ingredients & Steps"]
            PREPROCESSING["ğŸ”„ Data Preprocessing<br/>â€¢ Recipe Parsing<br/>â€¢ Ingredient Cleaning<br/>â€¢ Example Generation"]
        end
        
        %% Training Configuration Layer
        subgraph "âš™ï¸ Training Configuration Layer"
            CONFIG["ğŸ› ï¸ Training Config<br/>â€¢ LoRA Configuration<br/>â€¢ Training Arguments<br/>â€¢ Model Parameters"]
            TOKENIZER["ğŸ”¤ Tokenization<br/>â€¢ Text Processing<br/>â€¢ Chat Template<br/>â€¢ Special Tokens"]
        end
        
        %% Model Training Layer
        subgraph "ğŸ§  Model Training Layer"
            BASEMODEL["ğŸ—ï¸ Base Model<br/>â€¢ Qwen/Qwen2-0.5B-Instruct<br/>â€¢ Pre-trained Weights<br/>â€¢ Architecture"]
            LORA["ğŸ”— LoRA Adapters<br/>â€¢ Low-Rank Adaptation<br/>â€¢ Parameter Efficient<br/>â€¢ Fine-tuning"]
            TRAINER["ğŸƒâ€â™‚ï¸ Training Process<br/>â€¢ Gradient Updates<br/>â€¢ Loss Calculation<br/>â€¢ Validation"]
        end
        
        %% Output Layer
        subgraph "ğŸ’¾ Model Output Layer"
            FINEDTUNED["ğŸ¯ Fine-tuned Model<br/>â€¢ IFMF-Qwen2-0.5B-Instruct<br/>â€¢ Specialized for Indonesian Recipes<br/>â€¢ Saved Checkpoints"]
            METADATA["ğŸ“‹ Training Metadata<br/>â€¢ Training Statistics<br/>â€¢ Model Configuration<br/>â€¢ Performance Metrics"]
        end
    end
    
    %% =================================
    %% PROJECT 3: API SERVER
    %% =================================
    
    subgraph "ğŸš€ AI API SERVER"
        direction TB
        
        %% API Gateway Layer
        subgraph "ğŸŒ API Gateway Layer"
            FASTAPI["âš¡ FastAPI Framework<br/>â€¢ RESTful Endpoints<br/>â€¢ Request Routing<br/>â€¢ Response Handling"]
            CORS["ğŸ”„ CORS Middleware<br/>â€¢ Cross-Origin Support<br/>â€¢ Security Headers<br/>â€¢ Request Validation"]
        end
        
        %% Service Layer
        subgraph "ğŸ”§ Service Layer"
            ENDPOINTS["ğŸ“¡ API Endpoints<br/>â€¢ /generate (Text Generation)<br/>â€¢ /health (Health Check)<br/>â€¢ /cancel (Request Cancel)"]
            STREAMING["ğŸ“Š Streaming Logic<br/>â€¢ Server-Sent Events<br/>â€¢ Real-time Response<br/>â€¢ Chunk Processing"]
        end
        
        %% AI Inference Layer
        subgraph "ğŸ§  AI Inference Layer"
            MODELLOAD["ğŸ”„ Model Loading<br/>â€¢ Model Initialization<br/>â€¢ Memory Management<br/>â€¢ Device Configuration"]
            GENERATION["âœ¨ Text Generation<br/>â€¢ Prompt Processing<br/>â€¢ Token Generation<br/>â€¢ Response Streaming"]
        end
        
        %% Infrastructure Layer
        subgraph "ğŸ—ï¸ Infrastructure Layer"
            COMPUTE["ğŸ’» Compute Resources<br/>â€¢ CPU/GPU Allocation<br/>â€¢ Memory Management<br/>â€¢ Processing Queue"]
            MODELFILES["ğŸ“ Model Files<br/>â€¢ IFMF-Qwen2.5-1.5B-Instruct<br/>â€¢ Tokenizer Files<br/>â€¢ Configuration"]
        end
    end
    
    %% =================================
    %% CONNECTIONS BETWEEN PROJECTS
    %% =================================
    
    %% Training to API Server
    FINEDTUNED -.->|"Model Deployment"| MODELFILES
    METADATA -.->|"Configuration"| MODELLOAD
    
    %% Web App to API Server
    API1 -->|"HTTP Requests"| FASTAPI
    STREAMING -->|"SSE Response"| UTILS1
    
    %% Internal Web App Connections
    UI1 --> HOOKS1
    PAGES1 --> AUTH1
    HOOKS1 --> API1
    AUTH1 --> MIDDLEWARE1
    API1 --> ORM1
    ORM1 --> DB1
    
    %% Internal Training Pipeline Connections
    DATASET --> PREPROCESSING
    PREPROCESSING --> TOKENIZER
    CONFIG --> LORA
    BASEMODEL --> LORA
    TOKENIZER --> TRAINER
    LORA --> TRAINER
    TRAINER --> FINEDTUNED
    TRAINER --> METADATA
    
    %% Internal API Server Connections
    FASTAPI --> CORS
    CORS --> ENDPOINTS
    ENDPOINTS --> STREAMING
    STREAMING --> GENERATION
    MODELLOAD --> GENERATION
    MODELFILES --> MODELLOAD
    GENERATION --> COMPUTE
    
    %% Styling
    classDef webApp fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef training fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef apiServer fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef connection fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    
    %% Apply styles to web app components
    class UI1,PAGES1,AUTH1,HOOKS1,UTILS1,API1,MIDDLEWARE1,DB1,ORM1 webApp
    
    %% Apply styles to training components
    class DATASET,PREPROCESSING,CONFIG,TOKENIZER,BASEMODEL,LORA,TRAINER,FINEDTUNED,METADATA training
    
    %% Apply styles to API server components
    class FASTAPI,CORS,ENDPOINTS,STREAMING,MODELLOAD,GENERATION,COMPUTE,MODELFILES apiServer 